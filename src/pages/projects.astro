---
import Layout from '../layouts/Layout.astro';
import BeforeAfterSlider from '../components/ui/BeforeAfterSlider';
import Footer from '../components/Footer.astro';
import { getPortfolioItems } from '../lib/wp';

const projects = await getPortfolioItems();
---

<Layout title="Портфолио | Yard.">
  <div class="pt-32 pb-20 container mx-auto px-4 min-h-screen">
    <h1 class="text-5xl font-serif text-primary mb-12 text-center">Реализованные проекты</h1>

    <div class="grid grid-cols-1 gap-20 max-w-5xl mx-auto">
      {projects.length > 0 ? (
        projects.map((project) => (
          <div class="flex flex-col gap-6">
             <div class="flex flex-col md:flex-row md:justify-between md:items-end gap-4">
                <h2 class="text-3xl font-serif text-primary">{project.title}</h2>
                <div class="text-stone-600 text-sm md:text-base flex gap-4 md:gap-8">
                   <p><span class="font-semibold text-primary/80">Локация:</span> {project.location}</p>
                   <p><span class="font-semibold text-primary/80">Срок:</span> {project.duration}</p>
                </div>
             </div>
             
             <BeforeAfterSlider 
                client:visible 
                beforeImage={project.before} 
                afterImage={project.after} 
                alt={project.title} 
             />
             
             <div class="p-6 bg-white rounded-2xl shadow-sm border border-stone-100">
               <h3 class="font-medium text-primary mb-2">Описание проекта</h3>
               <p class="text-stone-600 leading-relaxed">{project.description}</p>
             </div>
          </div>
        ))
      ) : (
        <div class="text-center py-20 text-stone-400 bg-stone-50 rounded-3xl">
          Проекты еще не добавлены в портфолио.
        </div>
      )}
    </div>
  </div>
  <Footer />
</Layout>
